<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NCVS Poster Preview (2-page)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { margin: 0; }
  </style>
</head>
<body class="bg-gray-100">
  <div id="root"></div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/prop-types@15.8.1/prop-types.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/recharts@2.12.7/umd/Recharts.js"></script>
  <!-- lucide-react UMD is unreliable in this standalone preview; icons removed for screenshot -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    // Debug: show runtime errors on the page (so screenshots capture them)
    window.onerror = (msg, src, line, col) => {
      const pre = document.createElement('pre');
      pre.style.whiteSpace = 'pre-wrap';
      pre.style.padding = '20px';
      pre.style.color = '#b91c1c';
      pre.style.fontSize = '14px';
      pre.textContent = `Poster preview error: ${msg}\n${src}:${line}:${col}`;
      document.body.innerHTML = '';
      document.body.appendChild(pre);
    };

    // Recharts UMD exposes as window.Recharts
    const Recharts = window.Recharts;
    const {
      ComposedChart, Bar, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer,
      ScatterChart, Scatter, ReferenceLine, Cell
    } = Recharts;

    // Icons removed for standalone preview

    const App = () => {
      const socialContextData = [
        { age: 'Under 12', Alone: 47.6, Group: 27.5, Observed: 25.0 },
        { age: '12–14', Alone: 42.9, Group: 24.8, Observed: 32.2 },
        { age: '15–17', Alone: 42.7, Group: 32.6, Observed: 24.7 },
        { age: '18–20', Alone: 46.4, Group: 33.2, Observed: 20.4 },
        { age: '21–29', Alone: 57.3, Group: 21.1, Observed: 21.5 },
        { age: '30+', Alone: 64.7, Group: 12.0, Observed: 23.2 },
      ].map(d => ({ ...d, Social: +(d.Group + d.Observed).toFixed(1) }));

      const oddsRatioData = [
        { age: 'Under 12', or: 1.22, low: 0.91, high: 1.63 },
        { age: '12–14', or: 1.01, low: 0.79, high: 1.28 },
        { age: '15–17', or: 1.0, low: 1.0, high: 1.0, isRef: true },
        { age: '18–20', or: 1.16, low: 0.98, high: 1.37 },
        { age: '21–29', or: 1.8, low: 1.56, high: 2.08 },
        { age: '30+', or: 2.46, low: 2.11, high: 2.87 },
      ];

      const SectionHeader = ({ title }) => (
        <div className="bg-[#4a4a4a] text-white py-1 px-3 flex items-center gap-2 mb-3 rounded-sm uppercase tracking-wider font-bold text-sm">
          <span>{title}</span>
        </div>
      );

      return (
        <div className="min-h-screen bg-gray-100 p-8 flex justify-center">
          <div className="bg-white shadow-2xl w-full max-w-[1200px] border border-gray-300 flex flex-col p-6 font-sans text-[#333]">
            <div className="flex justify-between items-start border-b-4 border-[#9d2235] pb-4 mb-6">
              <div className="flex items-center gap-4">
                <div className="bg-[#9d2235] text-white p-3 font-bold text-2xl flex items-center justify-center rounded">T</div>
                <div>
                  <h1 className="text-2xl font-black text-[#9d2235] leading-tight uppercase">
                    Social Context of Incidents Across Age: NCVS Survey-Weighted Analyses (2014–2022)
                  </h1>
                  <p className="text-lg font-bold text-gray-700 mt-1">Danny Zweben | Temple University</p>
                </div>
              </div>
              <div className="text-right flex flex-col items-end">
                <div className="bg-[#4a4a4a] text-white px-4 py-2 font-bold flex items-center gap-2 rounded">
                  <span>CAB LAB</span>
                </div>
                <p className="text-xs mt-1 text-gray-500 font-semibold uppercase tracking-widest">Cognitive & Behavioral Lab</p>
              </div>
            </div>

            <div className="grid grid-cols-12 gap-6 flex-grow">
              <div className="col-span-3 flex flex-col gap-6">
                <div className="bg-gray-50 p-4 border-l-4 border-[#9d2235] rounded-r shadow-sm">
                  <SectionHeader title="Research Question" />
                  <p className="text-sm italic font-medium text-gray-800 leading-relaxed mb-2">
                    “Do incidents occurring in a social context remain elevated in ages 18–20 relative to adulthood?”
                  </p>
                  <ul className="list-disc ml-4 text-xs space-y-2 text-gray-700">
                    <li>Primary social context: Social = Co-offending + Observed vs. Alone.</li>
                    <li>Conventional check: Social = Co-offending only.</li>
                    <li>Scopes: Total, Theft/property, Violent/nonfatal personal (not shown here).</li>
                  </ul>
                </div>

                <div className="p-2">
                  <SectionHeader title="Method" />
                  <div className="space-y-3 text-xs text-gray-700">
                    <div>
                      <p className="font-bold text-[#9d2235] mb-1">Data Source</p>
                      <p>National Crime Victimization Survey (NCVS), 2014–2022; nationally representative stratified multistage survey.</p>
                    </div>
                    <div>
                      <p className="font-bold text-[#9d2235] mb-1">Dataset</p>
                      <p>Incident-level records (each record = one victimization incident). Scopes: Total, Theft/property, Violent/nonfatal personal.</p>
                    </div>
                    <div>
                      <p className="font-bold text-[#9d2235] mb-1">Operationalization</p>
                      <p><span className="font-semibold">Group</span> = co-offending; <span className="font-semibold">Observed</span> = solo incidents with others present who did not help (derived); <span className="font-semibold">Alone</span> = remaining solo incidents.</p>
                    </div>
                    <div>
                      <p className="font-bold text-[#9d2235] mb-1">Statistical Approach</p>
                      <p>Survey weights + replicate weights (Fay’s BRR). Rao–Scott omnibus + planned Bonferroni pairwise; survey-weighted logistic regression.</p>
                    </div>
                  </div>
                </div>
              </div>

              <div className="col-span-6 border-x border-gray-200 px-4">
                <SectionHeader title="Results (Total incidents; primary definition)" />

                <div className="mb-6">
                  <p className="text-xs font-bold uppercase text-gray-500 mb-2 text-center">Social context distribution (%) with Social = Group + Observed</p>
                  <div className="h-72">
                    <ResponsiveContainer width="100%" height="100%">
                      <ComposedChart data={socialContextData} margin={{ top: 10, right: 30, left: 0, bottom: 0 }}>
                        <CartesianGrid strokeDasharray="3 3" vertical={false} />
                        <XAxis dataKey="age" tick={{ fontSize: 10 }} />
                        <YAxis domain={[0, 100]} tick={{ fontSize: 10 }} />
                        <Tooltip contentStyle={{ fontSize: '10px' }} />
                        <Legend wrapperStyle={{ fontSize: '10px', paddingTop: '10px' }} />
                        <Bar dataKey="Alone" stackId="a" fill="#d1d5db" name="Alone" />
                        <Bar dataKey="Observed" stackId="a" fill="#6b7280" name="Observed" />
                        <Bar dataKey="Group" stackId="a" fill="#9d2235" name="Co-offending (Group)" />
                        <Line type="monotone" dataKey="Social" stroke="#111827" strokeWidth={2} dot={{ r: 3 }} name="Social (Group+Observed)" />
                      </ComposedChart>
                    </ResponsiveContainer>
                  </div>
                </div>

                <div className="grid grid-cols-2 gap-4">
                  <div className="bg-gray-50 p-3 rounded border border-gray-200">
                    <p className="text-[10px] font-bold text-center mb-2 text-[#9d2235] uppercase">Odds of Solo Offending (ORs)</p>
                    <p className="text-[9px] text-center text-gray-500 mb-1">(Ref: 15–17 years)</p>
                    <div className="h-48">
                      <ResponsiveContainer width="100%" height="100%">
                        <ScatterChart margin={{ top: 10, right: 10, bottom: 10, left: -20 }}>
                          <CartesianGrid strokeDasharray="3 3" vertical={false} />
                          <XAxis type="number" dataKey="or" domain={[0.5, 3]} tick={{ fontSize: 8 }} />
                          <YAxis type="category" dataKey="age" tick={{ fontSize: 8 }} width={70} />
                          <ReferenceLine x={1} stroke="#9d2235" strokeDasharray="3 3" />
                          <Tooltip cursor={{ strokeDasharray: '3 3' }} />
                          <Scatter name="Odds Ratio" data={oddsRatioData}>
                            {oddsRatioData.map((entry, index) => (
                              <Cell key={`cell-${index}`} fill={entry.isRef ? '#9d2235' : '#4a4a4a'} />
                            ))}
                          </Scatter>
                        </ScatterChart>
                      </ResponsiveContainer>
                    </div>
                    <p className="text-[9px] text-gray-400 text-center">95% CIs shown in tables</p>
                  </div>

                  <div className="flex flex-col justify-center gap-4">
                    <div className="text-center p-3 border-2 border-[#9d2235] rounded-lg">
                      <p className="text-3xl font-black text-[#9d2235]">1.16</p>
                      <p className="text-[10px] font-bold uppercase">OR for 18–20 vs 15–17</p>
                      <p className="text-[9px] text-gray-500 mt-1">p = .08 (ns)</p>
                    </div>
                    <div className="text-center p-3 bg-[#4a4a4a] text-white rounded-lg">
                      <p className="text-3xl font-black">2.46</p>
                      <p className="text-[10px] font-bold uppercase">OR for 30+ vs 15–17</p>
                      <p className="text-[9px] text-gray-300 mt-1">p &lt; .001</p>
                    </div>
                  </div>
                </div>
              </div>

              <div className="col-span-3 flex flex-col gap-6">
                <div className="bg-white p-2">
                  <p className="text-xs font-bold text-[#9d2235] border-b border-[#9d2235] mb-2 pb-1">Rao–Scott Omnibus (Total)</p>
                  <div className="flex justify-between items-center bg-gray-50 p-2 rounded">
                    <div className="text-center">
                      <p className="text-[10px] text-gray-500 font-bold uppercase">F</p>
                      <p className="text-lg font-bold text-gray-800">108.08</p>
                    </div>
                    <div className="text-center">
                      <p className="text-[10px] text-gray-500 font-bold uppercase">p</p>
                      <p className="text-lg font-bold text-[#9d2235]">&lt; .001</p>
                    </div>
                  </div>
                </div>

                <div className="bg-gray-50 p-4 border border-gray-200 rounded shadow-sm">
                  <p className="text-xs font-bold text-[#9d2235] mb-2 uppercase">Planned pairwise (Bonferroni)</p>
                  <ul className="list-disc ml-4 text-xs space-y-2 text-gray-700">
                    <li>15–17 vs 18–20: adj p = 1.00 (ns), Δ = 3.7 points (Social).</li>
                    <li>15–17 vs 21–29: adj p &lt; .001, Δ = 14.6 points.</li>
                    <li>15–17 vs 30+: adj p &lt; .001, Δ = 22.0 points.</li>
                  </ul>
                </div>

                <div>
                  <SectionHeader title="Takeaways" />
                  <div className="space-y-3 text-xs text-gray-700 leading-relaxed">
                    <p><span className="font-bold text-[#9d2235]">Pattern:</span> Social involvement is higher in adolescence and ages 18–20 than in adulthood.</p>
                    <p><span className="font-bold text-[#9d2235]">Adjacency:</span> 15–17 and 18–20 are similar relative to teen–adult contrasts.</p>
                    <p className="italic bg-yellow-50 p-2 rounded border border-yellow-200">Results were consistent when defining sociality as co-offending only.</p>
                  </div>
                </div>

                <div className="mt-auto pt-4 border-t border-gray-100">
                  <p className="text-[8px] text-gray-400">Citations to be finalized. CABLAB • Temple University</p>
                </div>
              </div>
            </div>

            <div className="mt-6 pt-4 border-t-4 border-[#9d2235] flex justify-between items-center">
              <p className="text-xs font-bold text-gray-600 uppercase">NCVS incident analyses (survey-weighted)</p>
              <div className="text-gray-400 text-xs">CABLAB</div>
            </div>
          </div>
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
